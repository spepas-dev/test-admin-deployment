import{r as v,j as e,C as D,a as N,U as B,b as R,m as C}from"./index-DerKfh_i.js";import{C as L,a as P}from"./card-B6ouLRYl.js";import{u as $,s as k,o as F,a as O,F as Y,b as d,c as m,d as x,e as h,f as j,g as z,h as g,k as H}from"./form-BqdHsX1y.js";import{D as J,b as q,d as G,e as W,f as X,T as K,g as M,h as Z,i as Q,j as A,k as b,l as ee,m as u}from"./table-C4EX-m7M.js";import{I as S}from"./input-D3bTOU5h.js";import{M as V}from"./multi-select-D1bUAzzq.js";import{S as I,a as T,b as w,c as U,d as _}from"./select-pV0H3e33.js";import{B as E}from"./badge-C6fu0KNW.js";import{F as se,P as ae}from"./palette-DDIu8pKY.js";import"./index-BnZGiQrK.js";import"./wand-sparkles-DhWsRIAQ.js";const re=F({User_ID:g().min(1,"Please select a user"),Deliver_ID:g().min(1,"Please select a rider"),type:H(["CAR","MOTORCYCLE","BICYCLE","VAN"],{required_error:"Please select a vehicle type"}),model:g().min(1,"Model is required"),color:g().min(1,"Please select a color"),registrationNumber:g().min(1,"Registration number is required").regex(/^[A-Z]{2}-\d{8}-\d{2}$/,"Registration number format should be XX-12345678-YY")}),le=F({vehicles:z(re).min(1,"Add at least one vehicle")}),te=[{value:"8c66228b-9527-490b-a174-b15cb557100b",label:"John Rider",icon:D}],ie=[{value:"8731e725-2b11-4c40-a828-b8408e35fe19",label:"John Delivery",icon:D}],ne=["CAR","MOTORCYCLE","BICYCLE","VAN"],ce=["RED","BLUE","GREEN","BLACK","WHITE","SILVER","GRAY"];function oe({open:c,onOpenChange:l,onSubmit:n}){const a=$({resolver:k(le),defaultValues:{vehicles:[{User_ID:"",Deliver_ID:"",type:"CAR",model:"",color:"",registrationNumber:""}]}}),{fields:o,append:p,remove:y}=O({control:a.control,name:"vehicles"});v.useEffect(()=>{c||a.reset({vehicles:[{User_ID:"",Deliver_ID:"",type:"CAR",model:"",color:"",registrationNumber:""}]})},[c]);const f=s=>{n(s.vehicles),a.reset()};return e.jsx(J,{open:c,onOpenChange:l,children:e.jsxs(q,{className:"max-w-2xl bg-white",children:[e.jsxs(G,{children:[e.jsx(W,{className:"text-[#4A36EC] text-xl font-bold",children:"Register Vehicle"}),e.jsx(X,{className:"text-gray-600",children:"Register new vehicles for delivery riders"})]}),e.jsx(Y,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(f),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:o.map((s,t)=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx(d,{control:a.control,name:`vehicles.${t}.User_ID`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Select User"}),e.jsx(h,{children:e.jsx(V,{options:te,value:[r.value],onValueChange:i=>r.onChange(i[0]),placeholder:"Select a user",maxCount:1})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`vehicles.${t}.Deliver_ID`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Select Rider"}),e.jsx(h,{children:e.jsx(V,{options:ie,value:[r.value],onValueChange:i=>r.onChange(i[0]),placeholder:"Select a rider",maxCount:1})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`vehicles.${t}.type`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Vehicle Type"}),e.jsxs(I,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(h,{children:e.jsx(T,{children:e.jsx(w,{placeholder:"Select vehicle type"})})}),e.jsx(U,{children:ne.map(i=>e.jsx(_,{value:i,children:i},i))})]}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`vehicles.${t}.model`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Vehicle Model"}),e.jsx(h,{children:e.jsx(S,{placeholder:"Enter vehicle model",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...r})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`vehicles.${t}.color`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Vehicle Color"}),e.jsxs(I,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(h,{children:e.jsx(T,{children:e.jsx(w,{placeholder:"Select vehicle color"})})}),e.jsx(U,{children:ce.map(i=>e.jsx(_,{value:i,children:i},i))})]}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`vehicles.${t}.registrationNumber`,render:({field:r})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Registration Number"}),e.jsx(h,{children:e.jsx(S,{placeholder:"GW-12345678-18",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...r})}),e.jsx(j,{className:"text-red-500"})]})}),o.length>1&&e.jsx(N,{type:"button",variant:"outline",size:"icon",className:"hover:bg-gray-100",onClick:()=>y(t),children:e.jsx(K,{className:"w-4 h-4 text-gray-600"})})]},s.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(N,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>p({User_ID:"",Deliver_ID:"",type:"CAR",model:"",color:"",registrationNumber:""}),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(N,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Register Vehicles"})]})]})})]})})}const de={"8c66228b-9527-490b-a174-b15cb557100b":{name:"John Rider",email:"john@example.com"}},me={"8731e725-2b11-4c40-a828-b8408e35fe19":{name:"John Delivery",phone:"+233123456789"}};function xe({vehicles:c}){return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs(Z,{children:[e.jsx(Q,{children:e.jsxs(A,{className:"bg-gray-50",children:[e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Registration"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Vehicle Info"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Rider"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Status"})]})}),e.jsxs(ee,{children:[c.map((l,n)=>{var a,o;return e.jsxs(A,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(u,{className:"text-gray-700 font-medium",children:l.registrationNumber}),e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-900",children:l.model}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(E,{variant:"outline",className:"text-[#4A36EC]",children:l.type}),e.jsx(E,{variant:"outline",className:"bg-gray-100",children:l.color})]})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-900",children:((a=de[l.User_ID])==null?void 0:a.name)||"Unknown User"}),e.jsx("span",{className:"text-gray-500 text-sm",children:((o=me[l.Deliver_ID])==null?void 0:o.name)||"Unknown Rider"})]})}),e.jsx(u,{children:e.jsx(E,{className:"bg-green-100 text-green-800",children:"Active"})})]},n)}),c.length===0&&e.jsx(A,{children:e.jsx(u,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No vehicles registered yet"})})]})]})})}function Ae(){const[c,l]=v.useState(!1),[n,a]=v.useState([]),[o,p]=v.useState(null),y=async s=>{try{console.log(s),a([...n,...s]),l(!1),p(null)}catch(t){p("Failed to add vehicles"),console.error(t)}},f=[{title:"Total Vehicles",value:n.length,icon:D,description:"Registered vehicles",trend:"+2.8%",trendUp:!0},{title:"Vehicle Types",value:new Set(n.map(s=>s.type)).size,icon:se,description:"Different categories",trend:"+1.5%",trendUp:!0},{title:"Color Variants",value:new Set(n.map(s=>s.color)).size,icon:ae,description:"Available colors",trend:"+3.2%",trendUp:!0},{title:"Active Riders",value:new Set(n.map(s=>s.User_ID)).size,icon:B,description:"Assigned riders",trend:"+2.1%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(R,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/user-management",className:"hover:text-[#4A36EC]",children:"User Management"}),e.jsx(R,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Vehicles"})]}),e.jsxs(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Rider Vehicles"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage rider vehicles and registrations"})]}),e.jsxs(N,{onClick:()=>l(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Register Vehicle"]})]}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((s,t)=>e.jsx(L,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(P,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(s.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.description}),e.jsx("span",{className:`text-xs font-medium ${s.trendUp?"text-green-600":"text-red-600"}`,children:s.trend})]})]})},t))}),e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(xe,{vehicles:n})}),o&&e.jsx("div",{className:"text-red-600 text-sm",children:o}),e.jsx(oe,{open:c,onOpenChange:l,onSubmit:y})]})}export{Ae as default};
