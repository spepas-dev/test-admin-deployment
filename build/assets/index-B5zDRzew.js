import{j as e,S as c,U as b,a as N,r as w,b as S,m as C}from"./index-DerKfh_i.js";import{C as F,a as M}from"./card-B6ouLRYl.js";import{u as P,a as B,F as k,b as m,c as x,d as h,e as p,f as j,s as I,o as D,g as E,h as u}from"./form-BqdHsX1y.js";import{D as $,b as L,d as V,e as _,f as z,T as H,g as U,h as J,i as O,j as A,k as g,l as q,m as o}from"./table-C4EX-m7M.js";import{I as G}from"./input-D3bTOU5h.js";import{M as R}from"./multi-select-D1bUAzzq.js";import{T as K}from"./textarea-BkVTqKzz.js";import{B as T}from"./badge-C6fu0KNW.js";import{C as Q}from"./circle-user-ohhmXKt-.js";import{L as W}from"./lock-DGS5_nu6.js";import"./index-BnZGiQrK.js";import"./wand-sparkles-DhWsRIAQ.js";const X=D({name:u().min(1,"Role name is required"),description:u().min(10,"Description must be at least 10 characters"),permissions:E(u()).min(1,"Select at least one permission"),users:E(u())}),Y=D({roles:E(X).min(1,"Add at least one role")}),Z=[{value:"view_dashboard",label:"View Dashboard",icon:c},{value:"manage_users",label:"Manage Users",icon:c},{value:"manage_inventory",label:"Manage Inventory",icon:c},{value:"generate_reports",label:"Generate Reports",icon:c}],ee=[{value:"user1",label:"John Doe",icon:b},{value:"user2",label:"Jane Smith",icon:b},{value:"user3",label:"Bob Johnson",icon:b}];function se({open:n,onOpenChange:r,onSubmit:l}){const s=P({resolver:I(Y),defaultValues:{roles:[{name:"",description:"",permissions:[],users:[]}]}}),{fields:d,append:f,remove:a}=B({control:s.control,name:"roles"}),v=y=>{l(y.roles),s.reset()};return e.jsx($,{open:n,onOpenChange:r,children:e.jsxs(L,{className:"max-w-2xl bg-white",children:[e.jsxs(V,{children:[e.jsx(_,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Roles"}),e.jsx(z,{className:"text-gray-600",children:"Create new roles and assign permissions"})]}),e.jsx(k,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(v),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:d.map((y,i)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(m,{control:s.control,name:`roles.${i}.name`,render:({field:t})=>e.jsxs(x,{children:[e.jsx(h,{className:"text-gray-700",children:"Role Name"}),e.jsx(p,{children:e.jsx(G,{placeholder:"Enter role name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...t})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(m,{control:s.control,name:`roles.${i}.description`,render:({field:t})=>e.jsxs(x,{children:[e.jsx(h,{className:"text-gray-700",children:"Description"}),e.jsx(p,{children:e.jsx(K,{placeholder:"Enter role description",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...t})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(m,{control:s.control,name:`roles.${i}.permissions`,render:({field:t})=>e.jsxs(x,{children:[e.jsx(h,{className:"text-gray-700",children:"Permissions"}),e.jsx(p,{children:e.jsx(R,{options:Z,value:t.value,onValueChange:t.onChange,placeholder:"Select permissions",maxCount:2,animation:.3,variant:"secondary",modalPopover:!0})}),e.jsx(j,{className:"text-red-500"})]})}),e.jsx(m,{control:s.control,name:`roles.${i}.users`,render:({field:t})=>e.jsxs(x,{children:[e.jsx(h,{className:"text-gray-700",children:"Assign Users"}),e.jsx(p,{children:e.jsx(R,{options:ee,value:t.value,onValueChange:t.onChange,placeholder:"Select users",maxCount:3,animation:.3,variant:"default",modalPopover:!0})}),e.jsx(j,{className:"text-red-500"})]})})]}),d.length>1&&e.jsx(N,{type:"button",variant:"outline",size:"icon",className:"mt-8 hover:bg-gray-100",onClick:()=>a(i),children:e.jsx(H,{className:"w-4 h-4 text-gray-600"})})]},y.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(N,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>f({name:"",description:"",permissions:[],users:[]}),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(N,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Roles"})]})]})})]})})}function ae({roles:n}){return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs(J,{children:[e.jsx(O,{children:e.jsxs(A,{className:"bg-gray-50",children:[e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Role Name"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Description"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Permissions"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Assigned Users"})]})}),e.jsxs(q,{children:[n.map((r,l)=>e.jsxs(A,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(o,{className:"text-gray-700 font-medium",children:r.name}),e.jsx(o,{className:"text-gray-700",children:r.description}),e.jsx(o,{children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:r.permissions.map(s=>e.jsx(T,{variant:"outline",className:"bg-[#4A36EC]/10 text-[#4A36EC] border-0",children:s},s))})}),e.jsx(o,{children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:r.users.map(s=>e.jsx(T,{variant:"outline",className:"bg-gray-100 text-gray-700 border-0",children:s},s))})})]},l)),n.length===0&&e.jsx(A,{children:e.jsx(o,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No roles added yet"})})]})]})})}function je(){const[n,r]=w.useState(!1),[l,s]=w.useState([]),d=async a=>{console.log(a),s([...l,...a]),r(!1)},f=[{title:"Total Roles",value:l.length,icon:Q,description:"Active roles in system",trend:"+2.1%",trendUp:!0},{title:"Total Permissions",value:new Set(l.flatMap(a=>a.permissions)).size,icon:c,description:"Assigned permissions",trend:"+3.4%",trendUp:!0},{title:"Assigned Users",value:new Set(l.flatMap(a=>a.users)).size,icon:b,description:"Users with roles",trend:"+1.8%",trendUp:!0},{title:"Access Levels",value:"5",icon:W,description:"Security levels",trend:"+0.9%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(S,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/access-control",className:"hover:text-[#4A36EC]",children:"Access Control"}),e.jsx(S,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Roles"})]}),e.jsxs(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Roles"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage user roles and their permissions"})]}),e.jsxs(N,{onClick:()=>r(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Role"]})]}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((a,v)=>e.jsx(F,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:a.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(a.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:a.description}),e.jsx("span",{className:`text-xs font-medium ${a.trendUp?"text-green-600":"text-red-600"}`,children:a.trend})]})]})},v))}),e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(ae,{roles:l})}),e.jsx(se,{open:n,onOpenChange:r,onSubmit:d})]})}export{je as default};
