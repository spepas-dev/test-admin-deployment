import{r as x,j as e,i as S,a as N,U as $,b as C,m as f}from"./index-DerKfh_i.js";import{C as B,a as z}from"./card-B6ouLRYl.js";import{u as R,s as V,o as M,a as J,F as H,b as A,c as E,d as D,e as w,f as I,g as O,h as y,n as G}from"./form-BqdHsX1y.js";import{u as T,G as k,M as F,I as K}from"./esm-DZ7ib8zA.js";import{D as q,b as W,d as Q,e as X,f as Y,T as Z,g as U,h as L,i as ee,j as v,k as b,l as se,m as j}from"./table-C4EX-m7M.js";import{I as ae}from"./input-D3bTOU5h.js";import{M as le}from"./multi-select-D1bUAzzq.js";import{B as te}from"./badge-C6fu0KNW.js";import{M as _}from"./map-pin-PjRSADGH.js";import{S as re}from"./shopping-bag-B8v0gIiL.js";import"./index-BnZGiQrK.js";import"./wand-sparkles-DhWsRIAQ.js";const ne=M({storeName:y().min(1,"Store name is required"),longitude:G(),latitude:G(),Gopa_ID:y().min(1,"Please select a Gopo"),User_ID:y().min(1,"Please select a user")}),ie=M({sellers:O(ne).min(1,"Add at least one seller store")}),oe=[{value:"528008c6-d9fd-4590-ad84-6b9a42b84197",label:"John Doe",icon:S},{value:"628008c6-d9fd-4590-ad84-6b9a42b84198",label:"Jane Smith",icon:S}],de=["places"];function ce({open:i,onOpenChange:o,onSubmit:a,selectedLocation:s}){const{isLoaded:c,loadError:d}=T({googleMapsApiKey:"",libraries:de}),l=x.useMemo(()=>({lat:5.6037,lng:-.187}),[]),t=R({resolver:V(ie),defaultValues:{sellers:[{storeName:"",longitude:(s==null?void 0:s.lng)||l.lng,latitude:(s==null?void 0:s.lat)||l.lat,Gopa_ID:"",User_ID:""}]}}),{fields:n,append:h,remove:r}=J({control:t.control,name:"sellers"});x.useEffect(()=>{i||t.reset({sellers:[{storeName:"",longitude:(s==null?void 0:s.lng)||l.lng,latitude:(s==null?void 0:s.lat)||l.lat,Gopa_ID:"",User_ID:""}]})},[i,s,l]);const g=p=>{a(p.sellers),t.reset()};return d?e.jsx("div",{children:"Error loading map"}):c?e.jsx(q,{open:i,onOpenChange:o,children:e.jsxs(W,{className:"max-w-2xl bg-white",children:[e.jsxs(Q,{children:[e.jsx(X,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Seller Store"}),e.jsx(Y,{className:"text-gray-600",children:"Register new seller stores and their locations"})]}),e.jsx(H,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(g),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:n.map((p,u)=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx(A,{control:t.control,name:`sellers.${u}.Gopa_ID`,render:({field:m})=>e.jsxs(E,{children:[e.jsx(D,{className:"text-gray-700",children:"Select Gopo"}),e.jsx(w,{children:e.jsx(le,{options:oe,value:[m.value],onValueChange:P=>m.onChange(P[0]),placeholder:"Select a Gopo",maxCount:1})}),e.jsx(I,{className:"text-red-500"})]})}),e.jsx(A,{control:t.control,name:`sellers.${u}.storeName`,render:({field:m})=>e.jsxs(E,{children:[e.jsx(D,{className:"text-gray-700",children:"Store Name"}),e.jsx(w,{children:e.jsx(ae,{placeholder:"Enter store name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...m})}),e.jsx(I,{className:"text-red-500"})]})}),e.jsx("div",{className:"h-[200px] rounded-lg overflow-hidden",children:e.jsx(k,{zoom:13,center:l,mapContainerClassName:"w-full h-full",onClick:m=>{m.latLng&&(t.setValue(`sellers.${u}.latitude`,m.latLng.lat()),t.setValue(`sellers.${u}.longitude`,m.latLng.lng()))},children:e.jsx(F,{position:{lat:p.latitude,lng:p.longitude}})})}),n.length>1&&e.jsx(N,{type:"button",variant:"outline",size:"icon",className:"hover:bg-gray-100",onClick:()=>r(u),children:e.jsx(Z,{className:"w-4 h-4 text-gray-600"})})]},p.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(N,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>h({storeName:"",longitude:l.lng,latitude:l.lat,Gopa_ID:"",User_ID:""}),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(N,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Stores"})]})]})})]})}):e.jsx("div",{children:"Loading..."})}const me=["places"];function xe({sellers:i,selectedLocation:o,onLocationSelect:a}){const{isLoaded:s,loadError:c}=T({googleMapsApiKey:"",libraries:me}),[d,l]=x.useState(null),t=x.useMemo(()=>o||{lat:5.6037,lng:-.187},[o]);return c?e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"text-red-600",children:"Error loading map. Please check your API key."})}):s?e.jsxs(k,{zoom:13,center:t,mapContainerClassName:"w-full h-full",onClick:n=>{n.latLng&&a({lat:n.latLng.lat(),lng:n.latLng.lng()})},children:[i.map((n,h)=>e.jsx(F,{position:{lat:n.latitude,lng:n.longitude},onClick:()=>l(n)},h)),d&&e.jsx(K,{position:{lat:d.latitude,lng:d.longitude},onCloseClick:()=>l(null),children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:d.storeName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Gopo ID: ",d.Gopa_ID]})]})})]}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"text-gray-600",children:"Loading map..."})})}const he={"528008c6-d9fd-4590-ad84-6b9a42b84197":{name:"John Doe",email:"john@example.com"},"628008c6-d9fd-4590-ad84-6b9a42b84198":{name:"Jane Smith",email:"jane@example.com"}};function ge({sellers:i,onLocationSelect:o}){return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs(L,{children:[e.jsx(ee,{children:e.jsxs(v,{className:"bg-gray-50",children:[e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Store Name"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Assigned Gopo"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Location"}),e.jsx(b,{className:"text-[#4A36EC] font-semibold",children:"Actions"})]})}),e.jsxs(se,{children:[i.map((a,s)=>{var c;return e.jsxs(v,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(j,{className:"text-gray-700 font-medium",children:a.storeName}),e.jsx(j,{className:"text-gray-700",children:((c=he[a.Gopa_ID])==null?void 0:c.name)||"Unknown Gopo"}),e.jsx(j,{className:"text-gray-700",children:e.jsx(te,{variant:"secondary",children:`${a.latitude.toFixed(4)}, ${a.longitude.toFixed(4)}`})}),e.jsx(j,{children:e.jsxs(N,{variant:"outline",size:"sm",className:"hover:bg-[#4A36EC]/10",onClick:()=>o({lat:a.latitude,lng:a.longitude}),children:[e.jsx(_,{className:"w-4 h-4 mr-2 text-[#4A36EC]"}),"View on Map"]})})]},s)}),i.length===0&&e.jsx(v,{children:e.jsx(j,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No seller stores added yet"})})]})]})})}function De(){const[i,o]=x.useState(!1),[a,s]=x.useState([]),[c,d]=x.useState(null),[l,t]=x.useState(null),n=async r=>{try{console.log(r),s([...a,...r]),o(!1),t(null)}catch(g){t("Failed to add sellers"),console.error(g)}},h=[{title:"Total Sellers",value:a.length,icon:S,description:"Registered sellers",trend:"+3.2%",trendUp:!0},{title:"Active Locations",value:a.length,icon:_,description:"Service locations",trend:"+2.1%",trendUp:!0},{title:"Assigned Gopos",value:new Set(a.map(r=>r.Gopa_ID)).size,icon:$,description:"Active Gopos",trend:"+1.5%",trendUp:!0},{title:"Total Products",value:"156",icon:re,description:"Listed products",trend:"+4.3%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(C,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/user-management",className:"hover:text-[#4A36EC]",children:"User Management"}),e.jsx(C,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Sellers"})]}),e.jsxs(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Seller Stores"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage seller stores and their locations"})]}),e.jsxs(N,{onClick:()=>o(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Seller Store"]})]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((r,g)=>e.jsx(B,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:r.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(r.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:r.description}),e.jsx("span",{className:`text-xs font-medium ${r.trendUp?"text-green-600":"text-red-600"}`,children:r.trend})]})]})},g))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6",children:[e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"lg:col-span-2 h-[400px] rounded-lg overflow-hidden border",children:e.jsx(xe,{sellers:a,selectedLocation:c,onLocationSelect:d})}),e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"lg:col-span-4",children:e.jsx(ge,{sellers:a,onLocationSelect:d})})]}),l&&e.jsx("div",{className:"text-red-600 text-sm",children:l}),e.jsx(ce,{open:i,onOpenChange:o,onSubmit:n,selectedLocation:c})]})}export{De as default};
