import{j as e,W as l,a as h,r as N,U as M,b as y,m as u}from"./index-DerKfh_i.js";import{C as F,a as B}from"./card-B6ouLRYl.js";import{u as k,s as R,o as D,a as _,F as G,b as v,c as S,d as f,e as C,f as E,g as b,h as A}from"./form-BqdHsX1y.js";import{D as L,b as O,d as P,e as H,f as J,T as Y,g as U,h as $,i as z,j,k as x,l as V,m}from"./table-C4EX-m7M.js";import{M as T}from"./multi-select-D1bUAzzq.js";import{B as K}from"./badge-C6fu0KNW.js";import{H as W,C as q}from"./hammer-BLNoiV4U.js";import"./index-BnZGiQrK.js";import"./wand-sparkles-DhWsRIAQ.js";const Q=D({User_ID:A().min(1,"Please select a user"),Specialties:b(b(A())).min(1,"Add at least one specialty group")}),X=D({goros:b(Q).min(1,"Add at least one mechanic")}),Z=[{value:"user1",label:"John Doe",icon:l},{value:"user2",label:"Jane Smith",icon:l}],ee=[{value:"TYRES",label:"Tyres",icon:l},{value:"FAN_BELT",label:"Fan Belt",icon:l},{value:"ENGINE",label:"Engine",icon:l},{value:"BRAKES",label:"Brakes",icon:l},{value:"TRANSMISSION",label:"Transmission",icon:l},{value:"ELECTRICAL",label:"Electrical",icon:l},{value:"AC_SYSTEM",label:"AC System",icon:l},{value:"SUSPENSION",label:"Suspension",icon:l}];function se({open:o,onOpenChange:i,onSubmit:a}){const t=k({resolver:R(X),defaultValues:{goros:[{User_ID:"",Specialties:[[]]}]}}),{fields:r,append:c,remove:s}=_({control:t.control,name:"goros"}),n=g=>{a(g.goros),t.reset()};return e.jsx(L,{open:o,onOpenChange:i,children:e.jsxs(O,{className:"max-w-2xl bg-white",children:[e.jsxs(P,{children:[e.jsx(H,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Mechanics"}),e.jsx(J,{className:"text-gray-600",children:"Assign specialties to mechanics"})]}),e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(n),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:r.map((g,p)=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx(v,{control:t.control,name:`goros.${p}.User_ID`,render:({field:d})=>e.jsxs(S,{children:[e.jsx(f,{className:"text-gray-700",children:"Select Mechanic"}),e.jsx(C,{children:e.jsx(T,{options:Z,value:[d.value],onValueChange:I=>d.onChange(I[0]),placeholder:"Select a mechanic",maxCount:1,variant:"default"})}),e.jsx(E,{className:"text-red-500"})]})}),e.jsx(v,{control:t.control,name:`goros.${p}.Specialties.0`,render:({field:d})=>e.jsxs(S,{children:[e.jsx(f,{className:"text-gray-700",children:"Specialties"}),e.jsx(C,{children:e.jsx(T,{options:ee,value:d.value,onValueChange:d.onChange,placeholder:"Select specialties",variant:"secondary"})}),e.jsx(E,{className:"text-red-500"})]})}),r.length>1&&e.jsx(h,{type:"button",variant:"outline",size:"icon",className:"hover:bg-gray-100",onClick:()=>s(p),children:e.jsx(Y,{className:"w-4 h-4 text-gray-600"})})]},g.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(h,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>c({User_ID:"",Specialties:[[]]}),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(h,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Mechanics"})]})]})})]})})}const w={user1:{name:"John Doe",email:"john@example.com"},user2:{name:"Jane Smith",email:"jane@example.com"}};function ae({goros:o}){const i=a=>({TYRES:"bg-blue-100 text-blue-800",FAN_BELT:"bg-green-100 text-green-800",ENGINE:"bg-red-100 text-red-800",BRAKES:"bg-purple-100 text-purple-800",TRANSMISSION:"bg-yellow-100 text-yellow-800",ELECTRICAL:"bg-indigo-100 text-indigo-800",AC_SYSTEM:"bg-pink-100 text-pink-800",SUSPENSION:"bg-orange-100 text-orange-800"})[a]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(j,{className:"bg-gray-50",children:[e.jsx(x,{className:"text-[#4A36EC] font-semibold",children:"Mechanic"}),e.jsx(x,{className:"text-[#4A36EC] font-semibold",children:"Email"}),e.jsx(x,{className:"text-[#4A36EC] font-semibold",children:"Specialties"}),e.jsx(x,{className:"text-[#4A36EC] font-semibold",children:"Total Skills"})]})}),e.jsxs(V,{children:[o.map((a,t)=>{var r,c;return e.jsxs(j,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(m,{className:"text-gray-700 font-medium",children:((r=w[a.User_ID])==null?void 0:r.name)||"Unknown User"}),e.jsx(m,{className:"text-gray-700",children:((c=w[a.User_ID])==null?void 0:c.email)||"N/A"}),e.jsx(m,{children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:a.Specialties.flat().map((s,n)=>e.jsx(K,{variant:"outline",className:`${i(s)} border-0`,children:s.replace("_"," ")},n))})}),e.jsx(m,{className:"text-gray-700",children:a.Specialties.flat().length})]},t)}),o.length===0&&e.jsx(j,{children:e.jsx(m,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No mechanics added yet"})})]})]})})}function xe(){const[o,i]=N.useState(!1),[a,t]=N.useState([]),r=async s=>{console.log(s),t([...a,...s]),i(!1)},c=[{title:"Total goro",value:a.length,icon:l,description:"Active goro in system",trend:"+3.2%",trendUp:!0},{title:"Specialties",value:new Set(a.flatMap(s=>s.Specialties.flat())).size,icon:W,description:"Different specializations",trend:"+2.4%",trendUp:!0},{title:"Average Skills",value:a.length?Math.round(a.reduce((s,n)=>s+n.Specialties.flat().length,0)/a.length):0,icon:q,description:"Skills per mechanic",trend:"+1.8%",trendUp:!0},{title:"Pending Approvals",value:"5",icon:M,description:"goro awaiting approval",trend:"+0.9%",trendUp:!1}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(y,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/user-management",className:"hover:text-[#4A36EC]",children:"User Management"}),e.jsx(y,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Goro"})]}),e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Gopa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage gopa and their specialties"})]}),e.jsxs(h,{onClick:()=>i(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Goro"]})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((s,n)=>e.jsx(F,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(s.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.description}),e.jsx("span",{className:`text-xs font-medium ${s.trendUp?"text-green-600":"text-red-600"}`,children:s.trend})]})]})},n))}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(ae,{goros:a})}),e.jsx(se,{open:o,onOpenChange:i,onSubmit:r})]})}export{xe as default};
