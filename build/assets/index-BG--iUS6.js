import{r as x,u as X,j as e,c as J,a as D,S as Q,U as W,b as U,m as R}from"./index-DerKfh_i.js";import{C as Y,a as Z}from"./card-B6ouLRYl.js";import{P as O,u as ee,a as se,F as te,b as v,c as N,d as k,e as A,f as P,s as ae,o as $,g as z,h as w}from"./form-BqdHsX1y.js";import{u as re,c as ne,a as B,P as ie,D as oe,b as ce,d as le,e as de,f as me,T as xe,g as H,h as he,i as ue,j as I,k as S,l as pe,m as E}from"./table-C4EX-m7M.js";import{u as fe,S as je,a as be,b as ge,c as ye,d as Ce}from"./select-pV0H3e33.js";import{u as ve,C as Ne}from"./index-BnZGiQrK.js";import{I as ke}from"./input-D3bTOU5h.js";import{T as Ee}from"./textarea-BkVTqKzz.js";import{B as L}from"./badge-C6fu0KNW.js";import{L as Ae}from"./lock-DGS5_nu6.js";import{F as Pe}from"./file-check-CG0Z_9zW.js";var F="Checkbox",[we,Ye]=ne(F),[Se,De]=we(F),_=x.forwardRef((s,i)=>{const{__scopeCheckbox:t,name:a,checked:h,defaultChecked:o,required:n,disabled:l,value:p="on",onCheckedChange:u,form:r,...c}=s,[d,j]=x.useState(null),b=X(i,m=>j(m)),y=x.useRef(!1),M=d?r||!!d.closest("form"):!0,[g=!1,T]=re({prop:h,defaultProp:o,onChange:u}),G=x.useRef(g);return x.useEffect(()=>{const m=d==null?void 0:d.form;if(m){const C=()=>T(G.current);return m.addEventListener("reset",C),()=>m.removeEventListener("reset",C)}},[d,T]),e.jsxs(Se,{scope:t,state:g,disabled:l,children:[e.jsx(O.button,{type:"button",role:"checkbox","aria-checked":f(g)?"mixed":g,"aria-required":n,"data-state":K(g),"data-disabled":l?"":void 0,disabled:l,value:p,...c,ref:b,onKeyDown:B(s.onKeyDown,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:B(s.onClick,m=>{T(C=>f(C)?!0:!C),M&&(y.current=m.isPropagationStopped(),y.current||m.stopPropagation())})}),M&&e.jsx(Te,{control:d,bubbles:!y.current,name:a,value:p,checked:g,required:n,disabled:l,form:r,style:{transform:"translateX(-100%)"},defaultChecked:f(o)?!1:o})]})});_.displayName=F;var q="CheckboxIndicator",V=x.forwardRef((s,i)=>{const{__scopeCheckbox:t,forceMount:a,...h}=s,o=De(q,t);return e.jsx(ie,{present:a||f(o.state)||o.state===!0,children:e.jsx(O.span,{"data-state":K(o.state),"data-disabled":o.disabled?"":void 0,...h,ref:i,style:{pointerEvents:"none",...s.style}})})});V.displayName=q;var Te=s=>{const{control:i,checked:t,bubbles:a=!0,defaultChecked:h,...o}=s,n=x.useRef(null),l=fe(t),p=ve(i);x.useEffect(()=>{const r=n.current,c=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(c,"checked").set;if(l!==t&&j){const b=new Event("click",{bubbles:a});r.indeterminate=f(t),j.call(r,f(t)?!1:t),r.dispatchEvent(b)}},[l,t,a]);const u=x.useRef(f(t)?!1:t);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:h??u.current,...o,tabIndex:-1,ref:n,style:{...s.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function f(s){return s==="indeterminate"}function K(s){return f(s)?"indeterminate":s?"checked":"unchecked"}var Re=_,Ie=V;function Fe({className:s,...i}){return e.jsx(Re,{"data-slot":"checkbox",className:J("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-4 shrink-0 rounded-[4px] border shadow-xs transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:focus-visible:ring-0",s),...i,children:e.jsx(Ie,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current",children:e.jsx(Ne,{className:"size-3.5"})})})}const Me=$({name:w().min(1,"Permission name is required"),description:w().min(10,"Description must be at least 10 characters"),module:w().min(1,"Module is required"),actions:z(w()).min(1,"Select at least one action")}),Ue=$({permissions:z(Me).min(1,"Add at least one permission")}),Be=["create","read","update","delete","approve","reject"],Le=["inventory","sales","purchases","reports","users","settings"];function Oe({open:s,onOpenChange:i,onSubmit:t}){const a=ee({resolver:ae(Ue),defaultValues:{permissions:[{name:"",description:"",module:"",actions:[]}]}}),{fields:h,append:o,remove:n}=se({control:a.control,name:"permissions"}),l=p=>{t(p.permissions),a.reset()};return e.jsx(oe,{open:s,onOpenChange:i,children:e.jsxs(ce,{className:"max-w-2xl bg-white",children:[e.jsxs(le,{children:[e.jsx(de,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Permissions"}),e.jsx(me,{className:"text-gray-600",children:"Define new permissions and their access levels"})]}),e.jsx(te,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:h.map((p,u)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(v,{control:a.control,name:`permissions.${u}.name`,render:({field:r})=>e.jsxs(N,{children:[e.jsx(k,{className:"text-gray-700",children:"Permission Name"}),e.jsx(A,{children:e.jsx(ke,{placeholder:"Enter permission name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...r})}),e.jsx(P,{className:"text-red-500"})]})}),e.jsx(v,{control:a.control,name:`permissions.${u}.description`,render:({field:r})=>e.jsxs(N,{children:[e.jsx(k,{className:"text-gray-700",children:"Description"}),e.jsx(A,{children:e.jsx(Ee,{placeholder:"Enter permission description",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...r})}),e.jsx(P,{className:"text-red-500"})]})}),e.jsx(v,{control:a.control,name:`permissions.${u}.module`,render:({field:r})=>e.jsxs(N,{children:[e.jsx(k,{className:"text-gray-700",children:"Module"}),e.jsxs(je,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(A,{children:e.jsx(be,{className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",children:e.jsx(ge,{placeholder:"Select module"})})}),e.jsx(ye,{children:Le.map(c=>e.jsx(Ce,{value:c,children:c.charAt(0).toUpperCase()+c.slice(1)},c))})]}),e.jsx(P,{className:"text-red-500"})]})}),e.jsx(v,{control:a.control,name:`permissions.${u}.actions`,render:()=>e.jsxs(N,{children:[e.jsx(k,{className:"text-gray-700",children:"Actions"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Be.map(r=>e.jsx(v,{control:a.control,name:`permissions.${u}.actions`,render:({field:c})=>{var d;return e.jsxs(N,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(A,{children:e.jsx(Fe,{checked:(d=c.value)==null?void 0:d.includes(r),onCheckedChange:j=>{var b;return j?c.onChange([...c.value,r]):c.onChange((b=c.value)==null?void 0:b.filter(y=>y!==r))}})}),e.jsx(k,{className:"text-sm font-normal",children:r.charAt(0).toUpperCase()+r.slice(1)})]},r)}},r))}),e.jsx(P,{className:"text-red-500"})]})})]}),h.length>1&&e.jsx(D,{type:"button",variant:"outline",size:"icon",className:"mt-8 hover:bg-gray-100",onClick:()=>n(u),children:e.jsx(xe,{className:"w-4 h-4 text-gray-600"})})]},p.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(D,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>o({name:"",description:"",module:"",actions:[]}),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(D,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Permissions"})]})]})})]})})}function $e({permissions:s}){return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsxs(I,{className:"bg-gray-50",children:[e.jsx(S,{className:"text-[#4A36EC] font-semibold",children:"Permission Name"}),e.jsx(S,{className:"text-[#4A36EC] font-semibold",children:"Description"}),e.jsx(S,{className:"text-[#4A36EC] font-semibold",children:"Module"}),e.jsx(S,{className:"text-[#4A36EC] font-semibold",children:"Actions"})]})}),e.jsxs(pe,{children:[s.map((i,t)=>e.jsxs(I,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(E,{className:"text-gray-700",children:i.name}),e.jsx(E,{className:"text-gray-700",children:i.description}),e.jsx(E,{className:"text-gray-700",children:e.jsx(L,{variant:"outline",className:"bg-[#4A36EC]/10 text-[#4A36EC] border-0",children:i.module})}),e.jsx(E,{className:"text-gray-700",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:i.actions.map(a=>e.jsx(L,{variant:"outline",className:"bg-gray-100 text-gray-700 border-0",children:a},a))})})]},t)),s.length===0&&e.jsx(I,{children:e.jsx(E,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No permissions added yet"})})]})]})})}function Ze(){const[s,i]=x.useState(!1),[t,a]=x.useState([]),h=async n=>{console.log(n),a([...t,...n]),i(!1)},o=[{title:"Total Permissions",value:t.length,icon:Q,description:"Active permissions in system",trend:"+2.5%",trendUp:!0},{title:"User Groups",value:"8",icon:W,description:"Groups with permissions",trend:"+1.2%",trendUp:!0},{title:"Access Levels",value:new Set(t.map(n=>n.module)).size,icon:Ae,description:"Different access levels",trend:"+3.4%",trendUp:!0},{title:"Modules",value:"12",icon:Pe,description:"Protected modules",trend:"+1.8%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(U,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/access-control",className:"hover:text-[#4A36EC]",children:"Access Control"}),e.jsx(U,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Permissions"})]}),e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Permissions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage system permissions and access controls"})]}),e.jsxs(D,{onClick:()=>i(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Permission"]})]}),e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((n,l)=>e.jsx(Y,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(Z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:n.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:n.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(n.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:n.description}),e.jsx("span",{className:`text-xs font-medium ${n.trendUp?"text-green-600":"text-red-600"}`,children:n.trend})]})]})},l))}),e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx($e,{permissions:t})}),e.jsx(Oe,{open:s,onOpenChange:i,onSubmit:h})]})}export{Ze as default};
